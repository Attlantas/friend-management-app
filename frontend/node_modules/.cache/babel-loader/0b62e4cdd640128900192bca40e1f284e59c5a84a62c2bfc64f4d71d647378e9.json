{"ast":null,"code":"import { io } from 'socket.io-client';\nimport { toast } from 'react-toastify';\nimport { WEBSOCKET_SERVER_URL } from '../constants';\nexport const socket = io(WEBSOCKET_SERVER_URL, {\n  transports: ['websocket'],\n  reconnectionAttempts: 5,\n  reconnectionDelay: 3000\n  //withCredentials: true\n});\nexport const setupSocketListeners = (dispatch, userId) => {\n  if (!socket) return;\n  socket.on('connect', () => {\n    console.log('Connected to WebSocket ‚úÖ');\n    socket.emit('user_online', userId); // Inform server that user is online\n  });\n  socket.on('friend_request', request => {\n    console.log('New Friend Request üì©', request);\n    dispatch({\n      type: 'friends/addFriendRequest',\n      payload: request\n    });\n    toast.info(`üì© New friend request from ${request.name}`, {\n      position: 'top-right',\n      autoClose: 5000,\n      // Auto-hide after 5 seconds\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true\n    });\n  });\n  socket.on('friend_request_accepted', friend => {\n    console.log('Friend Added üéâ', friend);\n    dispatch({\n      type: 'friends/fetchFriendsSuccess',\n      payload: friend\n    });\n  });\n  socket.on('friend_removed', removedFriendId => {\n    console.log('Friend Removed ‚ùå', removedFriendId);\n    dispatch({\n      type: 'friends/removeFriendSuccess',\n      payload: removedFriendId\n    });\n  });\n  socket.on('disconnect', () => {\n    console.log('Disconnected from WebSocket ‚ùå');\n  });\n\n  // Emit `user_offline` when user closes the tab\n  window.addEventListener('beforeunload', () => {\n    if (userId) {\n      socket.emit('user_offline', userId);\n      console.log(`User ${userId} is offline (Tab Closed) ‚ùå`);\n    }\n  });\n};","map":{"version":3,"names":["io","toast","WEBSOCKET_SERVER_URL","socket","transports","reconnectionAttempts","reconnectionDelay","setupSocketListeners","dispatch","userId","on","console","log","emit","request","type","payload","info","name","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","friend","removedFriendId","window","addEventListener"],"sources":["/Users/kthulu/PersonalDevelopment/friend-management-system/frontend/src/utils/socket.js"],"sourcesContent":["import { io } from 'socket.io-client';\nimport { toast } from 'react-toastify';\nimport {WEBSOCKET_SERVER_URL} from '../constants';\n\nexport const socket = io(WEBSOCKET_SERVER_URL, {\n  transports: ['websocket'],\n  reconnectionAttempts: 5,\n  reconnectionDelay: 3000,\n  //withCredentials: true\n});\n\nexport const setupSocketListeners = (dispatch, userId) => {\n  if (!socket) return;\n\n  socket.on('connect', () => {\n    console.log('Connected to WebSocket ‚úÖ');\n    socket.emit('user_online', userId); // Inform server that user is online\n  });\n\n  socket.on('friend_request', (request) => {\n    console.log('New Friend Request üì©', request);\n    dispatch({ type: 'friends/addFriendRequest', payload: request });\n\n    toast.info(`üì© New friend request from ${request.name}`, {\n      position: 'top-right',\n      autoClose: 5000, // Auto-hide after 5 seconds\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n    });\n  });\n\n  socket.on('friend_request_accepted', (friend) => {\n    console.log('Friend Added üéâ', friend);\n    dispatch({ type: 'friends/fetchFriendsSuccess', payload: friend });\n  });\n\n  socket.on('friend_removed', (removedFriendId) => {\n    console.log('Friend Removed ‚ùå', removedFriendId);\n    dispatch({ type: 'friends/removeFriendSuccess', payload: removedFriendId });\n  });\n\n  socket.on('disconnect', () => {\n    console.log('Disconnected from WebSocket ‚ùå');\n  });\n\n  // Emit `user_offline` when user closes the tab\n  window.addEventListener('beforeunload', () => {\n    if (userId) {\n      socket.emit('user_offline', userId);\n      console.log(`User ${userId} is offline (Tab Closed) ‚ùå`);\n    }\n  });\n};\n"],"mappings":"AAAA,SAASA,EAAE,QAAQ,kBAAkB;AACrC,SAASC,KAAK,QAAQ,gBAAgB;AACtC,SAAQC,oBAAoB,QAAO,cAAc;AAEjD,OAAO,MAAMC,MAAM,GAAGH,EAAE,CAACE,oBAAoB,EAAE;EAC7CE,UAAU,EAAE,CAAC,WAAW,CAAC;EACzBC,oBAAoB,EAAE,CAAC;EACvBC,iBAAiB,EAAE;EACnB;AACF,CAAC,CAAC;AAEF,OAAO,MAAMC,oBAAoB,GAAGA,CAACC,QAAQ,EAAEC,MAAM,KAAK;EACxD,IAAI,CAACN,MAAM,EAAE;EAEbA,MAAM,CAACO,EAAE,CAAC,SAAS,EAAE,MAAM;IACzBC,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;IACvCT,MAAM,CAACU,IAAI,CAAC,aAAa,EAAEJ,MAAM,CAAC,CAAC,CAAC;EACtC,CAAC,CAAC;EAEFN,MAAM,CAACO,EAAE,CAAC,gBAAgB,EAAGI,OAAO,IAAK;IACvCH,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEE,OAAO,CAAC;IAC7CN,QAAQ,CAAC;MAAEO,IAAI,EAAE,0BAA0B;MAAEC,OAAO,EAAEF;IAAQ,CAAC,CAAC;IAEhEb,KAAK,CAACgB,IAAI,CAAC,8BAA8BH,OAAO,CAACI,IAAI,EAAE,EAAE;MACvDC,QAAQ,EAAE,WAAW;MACrBC,SAAS,EAAE,IAAI;MAAE;MACjBC,eAAe,EAAE,KAAK;MACtBC,YAAY,EAAE,IAAI;MAClBC,YAAY,EAAE,IAAI;MAClBC,SAAS,EAAE;IACb,CAAC,CAAC;EACJ,CAAC,CAAC;EAEFrB,MAAM,CAACO,EAAE,CAAC,yBAAyB,EAAGe,MAAM,IAAK;IAC/Cd,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEa,MAAM,CAAC;IACtCjB,QAAQ,CAAC;MAAEO,IAAI,EAAE,6BAA6B;MAAEC,OAAO,EAAES;IAAO,CAAC,CAAC;EACpE,CAAC,CAAC;EAEFtB,MAAM,CAACO,EAAE,CAAC,gBAAgB,EAAGgB,eAAe,IAAK;IAC/Cf,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEc,eAAe,CAAC;IAChDlB,QAAQ,CAAC;MAAEO,IAAI,EAAE,6BAA6B;MAAEC,OAAO,EAAEU;IAAgB,CAAC,CAAC;EAC7E,CAAC,CAAC;EAEFvB,MAAM,CAACO,EAAE,CAAC,YAAY,EAAE,MAAM;IAC5BC,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;EAC9C,CAAC,CAAC;;EAEF;EACAe,MAAM,CAACC,gBAAgB,CAAC,cAAc,EAAE,MAAM;IAC5C,IAAInB,MAAM,EAAE;MACVN,MAAM,CAACU,IAAI,CAAC,cAAc,EAAEJ,MAAM,CAAC;MACnCE,OAAO,CAACC,GAAG,CAAC,QAAQH,MAAM,4BAA4B,CAAC;IACzD;EACF,CAAC,CAAC;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}