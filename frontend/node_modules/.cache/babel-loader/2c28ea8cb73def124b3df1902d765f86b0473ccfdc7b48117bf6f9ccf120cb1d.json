{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"../api/axios\";\n\n// Async Thunks\nexport const fetchFriends = createAsyncThunk(\"friends/fetchFriends\", async (_, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.get(\"/friends\");\n    return response.data; // Returns the list of friends\n  } catch (error) {\n    var _error$response;\n    return rejectWithValue(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || \"Failed to fetch friends\");\n  }\n});\nexport const fetchFriendRequests = createAsyncThunk(\"friends/fetchFriendRequests\", async (_, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.get(\"/friends/requests\");\n    return response.data; // Returns friend requests\n  } catch (error) {\n    var _error$response2;\n    return rejectWithValue(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || \"Failed to fetch friend requests\");\n  }\n});\nexport const removeFriend = createAsyncThunk(\"friends/removeFriend\", async (friendId, {\n  rejectWithValue\n}) => {\n  try {\n    await axios.delete(`/friends/${friendId}`);\n    return friendId; // Returns the ID of the removed friend\n  } catch (error) {\n    var _error$response3;\n    return rejectWithValue(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data) || \"Failed to remove friend\");\n  }\n});\nexport const acceptFriendRequest = createAsyncThunk(\"friends/acceptFriendRequest\", async (friendId, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.post(`/friends/accept`, {\n      friendId\n    });\n    return response.data; // Returns the newly added friend\n  } catch (error) {\n    var _error$response4;\n    return rejectWithValue(((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.data) || \"Failed to accept request\");\n  }\n});\n\n// Slice\nconst friendSlice = createSlice({\n  name: \"friends\",\n  initialState: {\n    friends: [],\n    requests: [],\n    loading: false,\n    error: null\n  },\n  reducers: {},\n  extraReducers: builder => {\n    builder\n    // Fetch Friends\n    .addCase(fetchFriends.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(fetchFriends.fulfilled, (state, action) => {\n      state.loading = false;\n      state.friends = action.payload;\n    }).addCase(fetchFriends.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    })\n\n    // Fetch Friend Requests\n    .addCase(fetchFriendRequests.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(fetchFriendRequests.fulfilled, (state, action) => {\n      state.loading = false;\n      state.requests = action.payload;\n    }).addCase(fetchFriendRequests.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    })\n\n    // Remove Friend\n    .addCase(removeFriend.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(removeFriend.fulfilled, (state, action) => {\n      state.loading = false;\n      state.friends = state.friends.filter(friend => friend.id !== action.payload);\n    }).addCase(removeFriend.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    })\n\n    // Accept Friend Request\n    .addCase(acceptFriendRequest.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(acceptFriendRequest.fulfilled, (state, action) => {\n      state.loading = false;\n      state.friends.push(action.payload); // Add the new friend\n      state.requests = state.requests.filter(req => req.id !== action.payload.id); // Remove the request\n    }).addCase(acceptFriendRequest.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    });\n  }\n});\nexport default friendSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","fetchFriends","_","rejectWithValue","response","get","data","error","_error$response","fetchFriendRequests","_error$response2","removeFriend","friendId","delete","_error$response3","acceptFriendRequest","post","_error$response4","friendSlice","name","initialState","friends","requests","loading","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","payload","rejected","filter","friend","id","push","req","reducer"],"sources":["/Users/kthulu/PersonalDevelopment/friend-management-system/frontend/src/store/friendSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"../api/axios\";\n\n// Async Thunks\nexport const fetchFriends = createAsyncThunk(\n  \"friends/fetchFriends\",\n  async (_, { rejectWithValue }) => {\n    try {\n      const response = await axios.get(\"/friends\");\n      return response.data; // Returns the list of friends\n    } catch (error) {\n      return rejectWithValue(error.response?.data || \"Failed to fetch friends\");\n    }\n  }\n);\n\nexport const fetchFriendRequests = createAsyncThunk(\n  \"friends/fetchFriendRequests\",\n  async (_, { rejectWithValue }) => {\n    try {\n      const response = await axios.get(\"/friends/requests\");\n      return response.data; // Returns friend requests\n    } catch (error) {\n      return rejectWithValue(\n        error.response?.data || \"Failed to fetch friend requests\"\n      );\n    }\n  }\n);\n\nexport const removeFriend = createAsyncThunk(\n  \"friends/removeFriend\",\n  async (friendId, { rejectWithValue }) => {\n    try {\n      await axios.delete(`/friends/${friendId}`);\n      return friendId; // Returns the ID of the removed friend\n    } catch (error) {\n      return rejectWithValue(error.response?.data || \"Failed to remove friend\");\n    }\n  }\n);\n\nexport const acceptFriendRequest = createAsyncThunk(\n  \"friends/acceptFriendRequest\",\n  async (friendId, { rejectWithValue }) => {\n    try {\n      const response = await axios.post(`/friends/accept`, { friendId });\n      return response.data; // Returns the newly added friend\n    } catch (error) {\n      return rejectWithValue(error.response?.data || \"Failed to accept request\");\n    }\n  }\n);\n\n// Slice\nconst friendSlice = createSlice({\n  name: \"friends\",\n  initialState: {\n    friends: [],\n    requests: [],\n    loading: false,\n    error: null,\n  },\n  reducers: {},\n  extraReducers: (builder) => {\n    builder\n      // Fetch Friends\n      .addCase(fetchFriends.pending, (state) => {\n        state.loading = true;\n        state.error = null;\n      })\n      .addCase(fetchFriends.fulfilled, (state, action) => {\n        state.loading = false;\n        state.friends = action.payload;\n      })\n      .addCase(fetchFriends.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.payload;\n      })\n\n      // Fetch Friend Requests\n      .addCase(fetchFriendRequests.pending, (state) => {\n        state.loading = true;\n        state.error = null;\n      })\n      .addCase(fetchFriendRequests.fulfilled, (state, action) => {\n        state.loading = false;\n        state.requests = action.payload;\n      })\n      .addCase(fetchFriendRequests.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.payload;\n      })\n\n      // Remove Friend\n      .addCase(removeFriend.pending, (state) => {\n        state.loading = true;\n        state.error = null;\n      })\n      .addCase(removeFriend.fulfilled, (state, action) => {\n        state.loading = false;\n        state.friends = state.friends.filter(\n          (friend) => friend.id !== action.payload\n        );\n      })\n      .addCase(removeFriend.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.payload;\n      })\n\n      // Accept Friend Request\n      .addCase(acceptFriendRequest.pending, (state) => {\n        state.loading = true;\n        state.error = null;\n      })\n      .addCase(acceptFriendRequest.fulfilled, (state, action) => {\n        state.loading = false;\n        state.friends.push(action.payload); // Add the new friend\n        state.requests = state.requests.filter(\n          (req) => req.id !== action.payload.id\n        ); // Remove the request\n      })\n      .addCase(acceptFriendRequest.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.payload;\n      });\n  },\n});\n\nexport default friendSlice.reducer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}