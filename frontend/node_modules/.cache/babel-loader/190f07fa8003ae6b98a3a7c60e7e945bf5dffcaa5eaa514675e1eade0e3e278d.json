{"ast":null,"code":"var _jsxFileName = \"/Users/kthulu/PersonalDevelopment/friend-management-system/frontend/src/pages/friendRequests.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { acceptFriendRequest } from \"../store/friendSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FriendRequests = () => {\n  _s();\n  const [requests, setRequests] = useState([]);\n  const token = useSelector(state => state.auth.token);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    const fetchRequests = async () => {\n      try {\n        const response = await axios.get(\"http://localhost:5000/api/friends/requests\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setRequests(response.data.requests);\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    fetchRequests();\n  }, [token]);\n  const handleAcceptRequest = async senderId => {\n    try {\n      await axios.post(\"http://localhost:5000/api/friends/accept-request\", {\n        senderId\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      dispatch(acceptFriendRequest(senderId));\n      setRequests(requests.filter(req => req._id !== senderId));\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Friend Requests\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), requests.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No friend requests\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 32\n    }, this) : null, /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: requests.map(req => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [req.name, /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleAcceptRequest(req._id),\n          children: \"Accept\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 13\n        }, this)]\n      }, req._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n};\n_s(FriendRequests, \"CKP8+cdb45SltS3gm3CqCr1Ex5o=\", false, function () {\n  return [useSelector, useDispatch];\n});\n_c = FriendRequests;\nexport default FriendRequests;\nvar _c;\n$RefreshReg$(_c, \"FriendRequests\");","map":{"version":3,"names":["React","useEffect","useState","axios","useSelector","useDispatch","acceptFriendRequest","jsxDEV","_jsxDEV","FriendRequests","_s","requests","setRequests","token","state","auth","dispatch","fetchRequests","response","get","headers","Authorization","data","error","console","handleAcceptRequest","senderId","post","filter","req","_id","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","name","onClick","_c","$RefreshReg$"],"sources":["/Users/kthulu/PersonalDevelopment/friend-management-system/frontend/src/pages/friendRequests.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { acceptFriendRequest } from \"../store/friendSlice\";\n\nconst FriendRequests = () => {\n  const [requests, setRequests] = useState([]);\n  const token = useSelector((state) => state.auth.token);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    const fetchRequests = async () => {\n      try {\n        const response = await axios.get(\"http://localhost:5000/api/friends/requests\", {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        setRequests(response.data.requests);\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    fetchRequests();\n  }, [token]);\n\n  const handleAcceptRequest = async (senderId) => {\n    try {\n      await axios.post(\n        \"http://localhost:5000/api/friends/accept-request\",\n        { senderId },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      dispatch(acceptFriendRequest(senderId));\n      setRequests(requests.filter((req) => req._id !== senderId));\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return (\n    <div>\n      <h3>Friend Requests</h3>\n      {requests.length === 0 ? <p>No friend requests</p> : null}\n      <ul>\n        {requests.map((req) => (\n          <li key={req._id}>\n            {req.name}\n            <button onClick={() => handleAcceptRequest(req._id)}>Accept</button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default FriendRequests;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}