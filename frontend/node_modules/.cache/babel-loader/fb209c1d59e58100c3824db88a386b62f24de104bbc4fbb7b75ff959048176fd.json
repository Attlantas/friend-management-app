{"ast":null,"code":"import { call, put, takeLatest } from \"redux-saga/effects\";\nimport axios from \"axios\";\nimport { fetchFriendsRequest, fetchFriendsSuccess, fetchFriendsFailure, removeFriendRequest, removeFriendSuccess, removeFriendFailure } from \"../store/friendSlice\";\n\n// Fetch Friends Saga\nfunction* fetchFriendsSaga(action) {\n  try {\n    const token = localStorage.getItem(\"token\");\n    const {\n      search,\n      page\n    } = action.payload;\n    const response = yield call(axios.get, `http://localhost:5000/api/friends?search=${search}&page=${page}`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    yield put(fetchFriendsSuccess(response.data));\n  } catch (error) {\n    yield put(fetchFriendsFailure(error.response.data.message));\n  }\n}\n\n// Remove Friend Saga\nfunction* removeFriendSaga(action) {\n  try {\n    const token = localStorage.getItem(\"token\");\n    yield call(axios.delete, `http://localhost:5000/api/friends/remove/${action.payload}`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    yield put(removeFriendSuccess(action.payload)); // Dispatch success action with friend ID\n  } catch (error) {\n    var _error$response, _error$response$data;\n    yield put(removeFriendFailure(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"Failed to remove friend\")); // Handle error\n  }\n}\n\n// Watcher Saga\nexport default function* watchFriendSaga() {\n  yield takeLatest(fetchFriendsRequest.type, fetchFriendsSaga); // Watch for fetchFriendsRequest\n  yield takeLatest(removeFriendRequest.type, removeFriendSaga); // Watch for removeFriendRequest\n}","map":{"version":3,"names":["call","put","takeLatest","axios","fetchFriendsRequest","fetchFriendsSuccess","fetchFriendsFailure","removeFriendRequest","removeFriendSuccess","removeFriendFailure","fetchFriendsSaga","action","token","localStorage","getItem","search","page","payload","response","get","headers","Authorization","data","error","message","removeFriendSaga","delete","_error$response","_error$response$data","watchFriendSaga","type"],"sources":["/Users/kthulu/PersonalDevelopment/friend-management-system/frontend/src/sagas/friendSaga.js"],"sourcesContent":["import { call, put, takeLatest } from \"redux-saga/effects\";\nimport axios from \"axios\";\nimport {\n  fetchFriendsRequest,\n  fetchFriendsSuccess,\n  fetchFriendsFailure,\n  removeFriendRequest,\n  removeFriendSuccess,\n  removeFriendFailure,\n} from \"../store/friendSlice\";\n\n// Fetch Friends Saga\nfunction* fetchFriendsSaga(action) {\n  try {\n    const token = localStorage.getItem(\"token\");\n    const { search, page } = action.payload;\n    const response = yield call(\n      axios.get,\n      `http://localhost:5000/api/friends?search=${search}&page=${page}`,\n      { headers: { Authorization: `Bearer ${token}` } }\n    );\n\n    yield put(fetchFriendsSuccess(response.data));\n  } catch (error) {\n    yield put(fetchFriendsFailure(error.response.data.message));\n  }\n}\n\n\n// Remove Friend Saga\nfunction* removeFriendSaga(action) {\n  try {\n    const token = localStorage.getItem(\"token\");\n    yield call(axios.delete, `http://localhost:5000/api/friends/remove/${action.payload}`, {\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    yield put(removeFriendSuccess(action.payload)); // Dispatch success action with friend ID\n  } catch (error) {\n    yield put(removeFriendFailure(error.response?.data?.message || \"Failed to remove friend\")); // Handle error\n  }\n}\n\n// Watcher Saga\nexport default function* watchFriendSaga() {\n  yield takeLatest(fetchFriendsRequest.type, fetchFriendsSaga); // Watch for fetchFriendsRequest\n  yield takeLatest(removeFriendRequest.type, removeFriendSaga); // Watch for removeFriendRequest\n}\n"],"mappings":"AAAA,SAASA,IAAI,EAAEC,GAAG,EAAEC,UAAU,QAAQ,oBAAoB;AAC1D,OAAOC,KAAK,MAAM,OAAO;AACzB,SACEC,mBAAmB,EACnBC,mBAAmB,EACnBC,mBAAmB,EACnBC,mBAAmB,EACnBC,mBAAmB,EACnBC,mBAAmB,QACd,sBAAsB;;AAE7B;AACA,UAAUC,gBAAgBA,CAACC,MAAM,EAAE;EACjC,IAAI;IACF,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,MAAM;MAAEC,MAAM;MAAEC;IAAK,CAAC,GAAGL,MAAM,CAACM,OAAO;IACvC,MAAMC,QAAQ,GAAG,MAAMlB,IAAI,CACzBG,KAAK,CAACgB,GAAG,EACT,4CAA4CJ,MAAM,SAASC,IAAI,EAAE,EACjE;MAAEI,OAAO,EAAE;QAAEC,aAAa,EAAE,UAAUT,KAAK;MAAG;IAAE,CAClD,CAAC;IAED,MAAMX,GAAG,CAACI,mBAAmB,CAACa,QAAQ,CAACI,IAAI,CAAC,CAAC;EAC/C,CAAC,CAAC,OAAOC,KAAK,EAAE;IACd,MAAMtB,GAAG,CAACK,mBAAmB,CAACiB,KAAK,CAACL,QAAQ,CAACI,IAAI,CAACE,OAAO,CAAC,CAAC;EAC7D;AACF;;AAGA;AACA,UAAUC,gBAAgBA,CAACd,MAAM,EAAE;EACjC,IAAI;IACF,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,MAAMd,IAAI,CAACG,KAAK,CAACuB,MAAM,EAAE,4CAA4Cf,MAAM,CAACM,OAAO,EAAE,EAAE;MACrFG,OAAO,EAAE;QAAEC,aAAa,EAAE,UAAUT,KAAK;MAAG;IAC9C,CAAC,CAAC;IACF,MAAMX,GAAG,CAACO,mBAAmB,CAACG,MAAM,CAACM,OAAO,CAAC,CAAC,CAAC,CAAC;EAClD,CAAC,CAAC,OAAOM,KAAK,EAAE;IAAA,IAAAI,eAAA,EAAAC,oBAAA;IACd,MAAM3B,GAAG,CAACQ,mBAAmB,CAAC,EAAAkB,eAAA,GAAAJ,KAAK,CAACL,QAAQ,cAAAS,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBL,IAAI,cAAAM,oBAAA,uBAApBA,oBAAA,CAAsBJ,OAAO,KAAI,yBAAyB,CAAC,CAAC,CAAC,CAAC;EAC9F;AACF;;AAEA;AACA,eAAe,UAAUK,eAAeA,CAAA,EAAG;EACzC,MAAM3B,UAAU,CAACE,mBAAmB,CAAC0B,IAAI,EAAEpB,gBAAgB,CAAC,CAAC,CAAC;EAC9D,MAAMR,UAAU,CAACK,mBAAmB,CAACuB,IAAI,EAAEL,gBAAgB,CAAC,CAAC,CAAC;AAChE","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}